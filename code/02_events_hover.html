<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<!-- <script src="https://cdn.plot.ly/plotly-2.14.0.min.js"></script>  -->


</head>

<body>
    <div>
        <h1>Hello!</h1>
    </div>
    <div>
        Let's make some plotly charts.
    </div>
    <div id="plotly_div" style="width:600px;height:450px;"></div>
    <div>This is below the chart.</div>
    <div id="plotly_hover_div">This will be changed on hover.</div>

    <script>
        /*  Needs to be below the div  */
        
        var trace_data = [
            {
              x: ['giraffes', 'orangutans', 'monkeys'],
              y: [20, 14, 23],
              type: 'bar'
            }
            ];

        var layout = {
              title:'My Beautiful Chart'             
            };
        
        chart_div = document.getElementById('plotly_div');
        info_div = document.getElementById("plotly_hover_div")
          
        Plotly.newPlot(chart_div, trace_data, layout);

        // here we code what happens during an event
        // we chain 2 events: plotly_hover and plotly_unhover 

        chart_div.on('plotly_hover', function(data){
            // inspect the data variable: 
            //console.log(data)

            // save the x,y variables  
            var xval = data.points[0].x
            var yval = data.points[0].y
            console.log(typeof yval)
            //console.log(xval)

            // change the contents of the info_div 
            info_div.innerHTML = "Hovering on datapoint: "+xval+", "+yval 
            // automatically converting num->str
        })
        .on("plotly_unhover", function(data){
            info_div.innerHTML = "mouse out"                
        })
    </script>

</body>